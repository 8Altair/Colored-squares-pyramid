<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WebGL2 Colored Squares</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body { height: 100%; margin: 0; background: #333; color: #fff; }    /* Background color, font color */
    .wrap
    {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      gap: 8px;
      padding: 10px;
      box-sizing: border-box;
    }
    .controls { font-family: system-ui, sans-serif; user-select: none; }
    canvas { display: block; border: 1px solid #555; background: #1f1f1f; }
  </style>

  <!-- glMatrix first -->
  <script src="https://cdn.jsdelivr.net/npm/gl-matrix@3.4.3/gl-matrix-min.js"></script>
  <!-- jQuery second -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <!-- Vertex shader -->
  <script id="vs" type="x-shader/x-vertex">
  #version 300 es
  /* Vertex attribute declaration: bind this attribute to slot 0 in VAO/VBO setup, each vertex provides
         a 3D position (x,y,z); Change 'location' if the attribute belongs to a different index */
  layout(location = 0) in vec3 position;
  uniform mat4 mvp; // Uniform mvp: Model * View * Projection matrix (column-major, 4x4)
  void main()
  {
    /* Change the expression if altering is needed in transform pipeline (use VP*M or add instancing),
       or if needed to apply per-vertex offsets (from another attribute). */
    gl_Position = mvp * vec4(position, 1.0);    // Compute clip-space position; (x, y, z, scaling)
  }
  </script>

  <!-- Fragment shader -->
  <script id="fs" type="x-shader/x-fragment">
  #version 300 es
  precision mediump float;  // Set default precision for float calculations
  uniform vec4 color;   // RGBA color passed from JavaScript (same for all pixels of a draw call)
  out vec4 fragColor;   // Output variable holding the final pixel color
  void main()
  {
    fragColor = color;  // Write the color to the framebuffer
  }
  </script>
</head>
<body>
  <div class="wrap">
    <div class="controls">
      <label>
          <input type="radio" name="mode" value="auto" checked> Automatic Color
      </label>
      <label style="margin-left: 14px;">
          <input type="radio" name="mode" value="manual"> Manual Color (base 1–4, second 5–7, third 8–9, top 0)
      </label>
    </div>

    <!-- The canvas is sized by JS to avoid scrolling -->
    <canvas id="glCanvas"></canvas>
  </div>

  <script src="gldemo.js"></script>
</body>
</html>
